{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/jeff/Code/E-Commerce-UI/web/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\n\ntype Product = {\n  id: number;\n  name: string;\n  description: string;\n  price_cents: number;\n  currency: string;\n  image_url?: string | null;\n};\n\nfunction money(cents: number, currency: string) {\n  return new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency: currency || \"USD\",\n  }).format(cents / 100);\n}\n\nexport default function HomePage() {\n  const [products, setProducts] = useState<Product[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [addingId, setAddingId] = useState<number | null>(null);\n  const [toast, setToast] = useState<string>(\"\");\n\n  useEffect(() => {\n    (async () => {\n      const res = await fetch(\"/api/products\", { cache: \"no-store\" });\n      if (res.status === 401) {\n        window.location.href = \"/login\";\n        return;\n      }\n      const data = await res.json();\n      setProducts(data);\n      setLoading(false);\n    })();\n  }, []);\n\n  async function addToCart(productId: number) {\n    setAddingId(productId);\n    setToast(\"\");\n\n    try {\n      const res = await fetch(\"/api/cart/items\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ product_id: productId, quantity: 1 }),\n      });\n\n      if (res.status === 401) {\n        window.location.href = \"/login\";\n        return;\n      }\n\n      const data = await res.json().catch(() => ({}));\n      if (!res.ok) throw new Error(data?.detail || \"Failed to add to cart\");\n\n      setToast(\"Added to cart\");\n      setTimeout(() => setToast(\"\"), 1500);\n    } catch (err: any) {\n      setToast(err?.message || \"Failed to add to cart\");\n    } finally {\n      setAddingId(null);\n    }\n  }\n\n  if (loading) {\n    return (\n      <main className=\"min-h-screen p-6\">\n        <p className=\"text-sm text-zinc-600\">Loading products…</p>\n      </main>\n    );\n  }\n\n  return (\n    <main className=\"min-h-screen\">\n      <section className=\"mx-auto max-w-6xl px-4 py-8\">\n        <div className=\"flex items-end justify-between\">\n          <div>\n            <p className=\"text-lg text-zinc-500\">Catalog</p>\n            <h1 className=\"text-2xl font-semibold tracking-tight text-black\">\n              Products\n            </h1>\n          </div>\n          <Link\n            href=\"/cart\"\n            className=\"rounded-xl border bg-zinc-300 px-3 py-2 text-sm text-black hover:bg-zinc-50\"\n          >\n            View cart\n          </Link>\n        </div>\n\n        {toast && (\n          <div className=\"mt-4 rounded-xl bg-zinc-900 px-3 py-2 text-sm text-white\">\n            {toast}\n          </div>\n        )}\n\n        <div className=\"mt-6 grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\n          {products.map((p) => (\n            <div\n              key={p.id}\n              className=\"rounded-2xl border bg-white p-4 shadow-sm\"\n            >\n              <div className=\"aspect-square overflow-hidden rounded-xl bg-zinc-100\">\n                {p.image_url && (\n                  <img\n                    src={p.image_url}\n                    alt={p.name}\n                    className=\"h-full w-full object-cover\"\n                    loading=\"lazy\"\n                  />\n                )}\n              </div>\n\n              <h2 className=\"mt-4 text-sm font-semibold text-zinc-900\">\n                {p.name}\n              </h2>\n\n              <p className=\"mt-1 text-sm text-zinc-600 line-clamp-2\">\n                {p.description}\n              </p>\n\n              <p className=\"mt-2 text-sm font-semibold text-zinc-900\">\n                {money(p.price_cents, p.currency)}\n              </p>\n\n              <button\n                onClick={() => addToCart(p.id)}\n                disabled={addingId === p.id}\n                className=\"mt-4 w-full rounded-xl bg-zinc-900 px-4 py-2 text-sm font-medium text-white hover:bg-zinc-800 disabled:opacity-60\"\n              >\n                {addingId === p.id ? \"Adding…\" : \"Add to cart\"}\n              </button>\n            </div>\n          ))}\n        </div>\n      </section>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAcA,SAAS,MAAM,KAAa,EAAE,QAAgB;IAC5C,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU,YAAY;IACxB,GAAG,MAAM,CAAC,QAAQ;AACpB;AAEe,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAgB;IACxD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAS;IAE3C,IAAA,kNAAS,EAAC;QACR,CAAC;YACC,MAAM,MAAM,MAAM,MAAM,iBAAiB;gBAAE,OAAO;YAAW;YAC7D,IAAI,IAAI,MAAM,KAAK,KAAK;gBACtB,OAAO,QAAQ,CAAC,IAAI,GAAG;gBACvB;YACF;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,YAAY;YACZ,WAAW;QACb,CAAC;IACH,GAAG,EAAE;IAEL,eAAe,UAAU,SAAiB;QACxC,YAAY;QACZ,SAAS;QAET,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,mBAAmB;gBACzC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,YAAY;oBAAW,UAAU;gBAAE;YAC5D;YAEA,IAAI,IAAI,MAAM,KAAK,KAAK;gBACtB,OAAO,QAAQ,CAAC,IAAI,GAAG;gBACvB;YACF;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YAC7C,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,MAAM,UAAU;YAE7C,SAAS;YACT,WAAW,IAAM,SAAS,KAAK;QACjC,EAAE,OAAO,KAAU;YACjB,SAAS,KAAK,WAAW;QAC3B,SAAU;YACR,YAAY;QACd;IACF;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAK,WAAU;sBACd,cAAA,8OAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;IAG3C;IAEA,qBACE,8OAAC;QAAK,WAAU;kBACd,cAAA,8OAAC;YAAQ,WAAU;;8BACjB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;;8CACC,8OAAC;oCAAE,WAAU;8CAAwB;;;;;;8CACrC,8OAAC;oCAAG,WAAU;8CAAmD;;;;;;;;;;;;sCAInE,8OAAC,uKAAI;4BACH,MAAK;4BACL,WAAU;sCACX;;;;;;;;;;;;gBAKF,uBACC,8OAAC;oBAAI,WAAU;8BACZ;;;;;;8BAIL,8OAAC;oBAAI,WAAU;8BACZ,SAAS,GAAG,CAAC,CAAC,kBACb,8OAAC;4BAEC,WAAU;;8CAEV,8OAAC;oCAAI,WAAU;8CACZ,EAAE,SAAS,kBACV,8OAAC;wCACC,KAAK,EAAE,SAAS;wCAChB,KAAK,EAAE,IAAI;wCACX,WAAU;wCACV,SAAQ;;;;;;;;;;;8CAKd,8OAAC;oCAAG,WAAU;8CACX,EAAE,IAAI;;;;;;8CAGT,8OAAC;oCAAE,WAAU;8CACV,EAAE,WAAW;;;;;;8CAGhB,8OAAC;oCAAE,WAAU;8CACV,MAAM,EAAE,WAAW,EAAE,EAAE,QAAQ;;;;;;8CAGlC,8OAAC;oCACC,SAAS,IAAM,UAAU,EAAE,EAAE;oCAC7B,UAAU,aAAa,EAAE,EAAE;oCAC3B,WAAU;8CAET,aAAa,EAAE,EAAE,GAAG,YAAY;;;;;;;2BA/B9B,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;AAuCvB"}}]
}